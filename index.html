<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>DÃ©fi 12 Jours Magique</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    /* Magical starry background */
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0b0033;
      color: #f8f4ff;
      padding: 20px;
      background-image:
        radial-gradient(1px 1px at 10% 20%, #fff, transparent),
        radial-gradient(2px 2px at 30% 40%, #fff, transparent),
        radial-gradient(1px 1px at 70% 25%, #fff, transparent),
        radial-gradient(2px 2px at 40% 80%, #fff, transparent),
        radial-gradient(1px 1px at 80% 60%, #fff, transparent);
      background-size: 200px 200px;
      animation: twinkle 3s infinite alternate;
    }
    @keyframes twinkle {
      from { background-color: #0b0033; }
      to { background-color: #1a004d; }
    }
    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
      text-shadow: 0 0 8px #ff85c0, 0 0 16px #ff69b4;
    }
    .day {
      background: rgba(255,255,255,0.05);
      border: 1px solid #ff69b4;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(255,105,180,0.5);
    }
    .day h2 {
      margin: 0;
      font-size: 1.3em;
      color: #ffb3dc;
      text-shadow: 0 0 4px #ff69b4;
    }
    .day p {
      margin: 8px 0;
      color: #ffd1e6;
    }
    .day textarea {
      width: 100%;
      min-height: 100px;
      background: rgba(255,255,255,0.1);
      border: 1px solid #ffb3dc;
      border-radius: 8px;
      color: #fff;
      padding: 8px;
      box-sizing: border-box;
    }
    .complete-btn {
      background: #27AE60;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 0 6px #27AE60;
      margin-top: 10px;
      transition: transform 0.2s;
    }
    .complete-btn.done {
      background: #ccc;
      color: #666;
      cursor: default;
      box-shadow: none;
      transform: none;
    }
    .complete-btn:hover:not(.done) {
      transform: scale(1.05);
    }
    #exportBtn {
      display: block;
      margin: 30px auto;
      background: #ff69b4;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 1em;
      box-shadow: 0 0 8px #ff85c0;
    }
  </style>
</head>
<body>
  <h1>âœ¨ DÃ©fi 12 Jours Magique âœ¨</h1>
  <p style="text-align:center; color:#ffd1e6;">Chaque jour, plonge 15 minutes dans un rituel magique pour transformer ta vie.</p>
  <div id="challenge">
    <!-- Daily challenges injected by JS -->
  </div>
  <button id="exportBtn" onclick="exportPDF()">ðŸ“„ TÃ©lÃ©charger le rÃ©sumÃ© magique</button>

  <script>
    const program = [
      { day:1, title:"Ã‰veil de gratitude", desc:"Note 3 choses merveilleuses de ta vie et ressens la gratitude."},
      { day:2, title:"Ã‰criture d'intention", desc:"Ã‰cris une intention claire et puissante pour guider ta journÃ©e."},
      { day:3, title:"MÃ©ditation cosmique", desc:"Pratique 5 min de mÃ©ditation guidÃ©e sous un ciel Ã©toilÃ© imaginaire."},
      { day:4, title:"Affirmations enchantÃ©es", desc:"RÃ©cite 3 affirmations qui rÃ©sonnent en toi comme des sortilÃ¨ges positifs."},
      { day:5, title:"Journal des miracles", desc:"Consigne un petit miracle ou une synchronicitÃ© observÃ©e aujourd'hui."},
      { day:6, title:"CrÃ©ation magique", desc:"Dessine ou Ã©cris librement pendant 15 min, laisse ton intuition guider."},
      { day:7, title:"Respiration d'Ã©toiles", desc:"Fais 3 cycles de respiration profonde en visualisant des Ã©toiles."},
      { day:8, title:"Acte de lumiÃ¨re", desc:"Pose un geste bienveillant pour illuminer la journÃ©e de quelqu'un."},
      { day:9, title:"DÃ©tox lunaire", desc:"Ã‰loigne-toi des Ã©crans et mÃ©dite dans la pÃ©nombre pendant 15 min."},
      { day:10, title:"CrÃ©ation d'un vision board", desc:"Assemble images et mots qui incarnent tes rÃªves magiques."},
      { day:11, title:"Lettre d'amour Ã  soi", desc:"Ã‰cris une lettre pleine de bienveillance pour toi-mÃªme."},
      { day:12, title:"CÃ©lÃ©bration cosmique", desc:"Relis ton parcours, cÃ©lÃ¨bre chaque victoire et fixe ton prochain dÃ©fi."}
    ];

    const container = document.getElementById('challenge');

    program.forEach(item => {
      const stored = JSON.parse(localStorage.getItem('defi12-'+item.day)) || {};
      const div = document.createElement('div');
      div.className = 'day';
      div.innerHTML = `
        <h2>Jour ${item.day} : ${item.title}</h2>
        <p>${item.desc}</p>
        <textarea placeholder="Ã‰cris ici ton ressenti..." id="journal-${item.day}">${stored.journal||''}</textarea>
        <button class="complete-btn ${stored.done? 'done':''}" id="btn-${item.day}">${stored.done? 'Fait âœ…':'Marquer comme fait'}</button>
      `;
      container.appendChild(div);
      const btn = document.getElementById('btn-'+item.day);
      const ta = document.getElementById('journal-'+item.day);
      if(!stored.done) {
        btn.addEventListener('click', () => {
          btn.textContent = 'Fait âœ…';
          btn.classList.add('done');
          saveDay(item.day, ta.value, true);
        });
      }
      ta.addEventListener('input', () => saveDay(item.day, ta.value, stored.done));
    });

    function saveDay(day, journal, done) {
      localStorage.setItem('defi12-'+day, JSON.stringify({journal, done}));
    }

    function exportPDF(){
      html2pdf().from(document.body).set({
        margin:0.5, filename:'defi12jours_magique.pdf', html2canvas:{scale:2}
      }).save();
    }
  </script>
</body>
</html>
